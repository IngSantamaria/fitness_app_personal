<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Entrenador Fitness</title>
    
    <!-- PWA Metadata -->
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Fitness App">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <!-- User Selection Screen -->
    <div id="user-selection-screen" class="screen">
        <div class="selection-container">
            <div class="selection-header">
                <h1 class="text-center mb-3">ğŸ‹ï¸ Mi Entrenador Fitness</h1>
                <p class="text-center text-muted mb-4">Selecciona tu perfil para continuar</p>
                <!-- Theme Toggle -->
                <div class="theme-toggle-container justify-content-center">
                    <label class="theme-toggle">
                        <input type="checkbox" id="theme-toggle">
                        <span class="slider"></span>
                        <span class="toggle-icon">ğŸŒ™</span>
                    </label>
                </div>
            </div>

            <div class="selection-content">
                <!-- Users Grid -->
                <div id="users-grid" class="users-grid mb-4">
                    <!-- User cards will be loaded here -->
                </div>

                <!-- Create New User -->
                <div class="create-user-section">
                    <h5 class="text-center mb-3">ğŸ†• Crear Nuevo Usuario</h5>
                    <div class="input-group">
                        <input type="text" id="new-user-name-main" class="form-control" placeholder="Nombre del nuevo usuario">
                        <button class="btn btn-success" onclick="createNewUserFromMain()">â•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-app-screen" class="screen" style="display: none;">
        <div class="main-wrapper">
            <!-- Header -->
            <header class="bg-primary text-white p-3">
                <div class="header-content">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h1 class="mb-0">ğŸ‹ï¸ Mi Entrenador Fitness</h1>
                            <p class="mb-0 small">Usuario: <span id="current-user-header">-</span></p>
                        </div>
                        <div class="d-flex align-items-center gap-3">
                            <!-- Theme Toggle -->
                            <div class="theme-toggle-container">
                                <label class="theme-toggle">
                                    <input type="checkbox" id="theme-toggle-app">
                                    <span class="slider"></span>
                                    <span class="toggle-icon">ğŸŒ™</span>
                                </label>
                            </div>
                            <!-- Switch User Button -->
                            <button class="btn btn-light btn-sm" onclick="showUserSelection()">
                                ğŸ‘¤ Cambiar Usuario
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content py-4">
            <!-- View Switcher -->
            <div class="btn-group w-100 mb-4" role="group">
                <button type="button" class="btn btn-outline-primary active" data-view="workout">Entrenamiento</button>
                <button type="button" class="btn btn-outline-primary" data-view="progress">Progreso</button>
                <button type="button" class="btn btn-outline-primary" data-view="schedule">Calendario</button>
                <button type="button" class="btn btn-outline-primary" data-view="routines">Rutinas</button>
                <button type="button" class="btn btn-outline-primary" data-view="users">Usuarios</button>
            </div>

            <!-- Workout View -->
            <div id="workout-view" class="view active">
                <div class="card mb-3">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0" id="workout-title">ğŸ¯ Hoy: Entrenamiento</h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted mb-3">Descanso recomendado entre series: 90-120 segundos</p>
                        
                        <!-- Exercise List -->
                        <div id="exercise-list">
                            <!-- Exercises will be loaded here -->
                        </div>

                        <button class="btn btn-success w-100 mt-3" onclick="completeWorkout()">
                            âœ… Completar Entrenamiento
                        </button>
                    </div>
                </div>
            </div>

            <!-- Progress View -->
            <div id="progress-view" class="view" style="display:none;">
                <div class="card mb-3">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">ğŸ“Š Tu Progreso</h5>
                    </div>
                    <div class="card-body">
                        <canvas id="progressChart" width="400" height="200"></canvas>
                        
                        <div class="row mt-3">
                            <div class="col-6">
                                <div class="text-center p-3 bg-light rounded">
                                    <h6 class="text-muted">Peso Total</h6>
                                    <h4 class="text-primary">1,250 kg</h4>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="text-center p-3 bg-light rounded">
                                    <h6 class="text-muted">Entrenamientos</h6>
                                    <h4 class="text-success">12</h4>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Schedule View -->
            <div id="schedule-view" class="view" style="display:none;">
                <div class="card mb-3">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">ğŸ“… Calendario de Entrenamiento</h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <strong>PrÃ³ximos entrenamientos:</strong>
                        </div>
                        <div id="schedule-list">
                            <!-- Schedule will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Routines View -->
            <div id="routines-view" class="view" style="display:none;">
                <div class="card mb-3">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">ğŸ’ª Editar Rutinas</h5>
                    </div>
                    <div class="card-body">
                        <!-- Muscle Group Selector -->
                        <div class="mb-3">
                            <label class="form-label"><strong>Seleccionar Grupo Muscular:</strong></label>
                            <select id="muscle-group-selector" class="form-select" onchange="loadRoutineEditor()">
                                <optgroup label="ğŸ‹ï¸ Pecho-Espalda">
                                    <option value="pecho-espalda-A">Pecho-Espalda A</option>
                                    <option value="pecho-espalda-B">Pecho-Espalda B</option>
                                </optgroup>
                                <optgroup label="ğŸ’ª Brazos">
                                    <option value="brazos-A">Brazos A</option>
                                    <option value="brazos-B">Brazos B</option>
                                </optgroup>
                                <optgroup label="ğŸ¦µ Piernas Hombre">
                                    <option value="piernas-hombre-A">Piernas Hombre A</option>
                                    <option value="piernas-hombre-B">Piernas Hombre B</option>
                                </optgroup>
                                <optgroup label="ğŸ¦µ Piernas Mujer">
                                    <option value="piernas-mujer-A">Piernas Mujer A</option>
                                    <option value="piernas-mujer-B">Piernas Mujer B</option>
                                </optgroup>
                                <optgroup label="ğŸ‘ GlÃºteos">
                                    <option value="gluteos">GlÃºteos</option>
                                </optgroup>
                                <optgroup label="ğŸ”¥ Abdomen-Cardio">
                                    <option value="abdomen-cardio">Abdomen-Cardio</option>
                                </optgroup>
                            </select>
                        </div>

                        <!-- Exercises List -->
                        <div id="routine-exercises-list">
                            <!-- Exercises will be loaded here -->
                        </div>

                        <!-- Add Exercise Button -->
                        <button class="btn btn-success w-100 mb-3" onclick="addNewExercise()">
                            â• Agregar Ejercicio
                        </button>

                        <!-- Save Routine Button -->
                        <button class="btn btn-primary w-100" onclick="saveRoutine()">
                            ğŸ’¾ Guardar Rutina
                        </button>
                    </div>
                </div>
            </div>

            <!-- Users View -->
            <div id="users-view" class="view" style="display:none;">
                <div class="card mb-3">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">ğŸ‘¥ GestiÃ³n de Usuarios</h5>
                    </div>
                    <div class="card-body">
                        <!-- Current User Display -->
                        <div class="alert alert-info mb-3" id="current-user-display">
                            <strong>Usuario actual:</strong> <span id="current-user-name">No seleccionado</span>
                        </div>

                        <!-- User Selection -->
                        <div class="mb-3">
                            <label class="form-label"><strong>Seleccionar Usuario:</strong></label>
                            <select id="user-selector" class="form-select mb-2">
                                <option value="">-- Seleccionar usuario --</option>
                            </select>
                            <button class="btn btn-primary w-100" onclick="switchUser()">
                                ğŸ”„ Cambiar Usuario
                            </button>
                        </div>

                        <hr>

                        <!-- Create New User -->
                        <div class="mb-3">
                            <h6>ğŸ†• Crear Nuevo Usuario</h6>
                            <div class="mb-2">
                                <input type="text" id="new-user-name" class="form-control" placeholder="Nombre del usuario">
                            </div>
                            <button class="btn btn-success w-100" onclick="createNewUser()">
                                â• Crear Usuario
                            </button>
                        </div>

                        <hr>

                        <!-- User Schedule Configuration -->
                        <div class="mb-3">
                            <h6>ğŸ“… Configurar Rutina Semanal</h6>
                            <div class="mb-2">
                                <label class="form-label">DÃ­as de entrenamiento por semana:</label>
                                <select id="training-days" class="form-select">
                                    <option value="3">3 dÃ­as</option>
                                    <option value="4">4 dÃ­as</option>
                                    <option value="5">5 dÃ­as</option>
                                    <option value="6">6 dÃ­as</option>
                                </select>
                            </div>
                            <div id="schedule-config" class="schedule-config">
                                <!-- Schedule will be generated here -->
                            </div>
                            <button class="btn btn-warning w-100" onclick="saveUserSchedule()">
                                ğŸ’¾ Guardar ConfiguraciÃ³n
                            </button>
                        </div>

                        <!-- User List -->
                        <div class="mb-3">
                            <h6>ğŸ“‹ Usuarios Registrados</h6>
                            <div id="users-list">
                                <!-- Users will be listed here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </main>

            <!-- Floating Action Button -->
            <div class="fab-container">
                <button class="btn btn-primary rounded-circle fab" onclick="showAddExercise()">
                    <span class="fs-4">+</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>